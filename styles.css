:root{
  --bg:#000000; --card:#151517; --muted:#7A7A83; --text:#F8F8FA; --brand:#34C759; --danger:#FF453A;
  --border:#242428; --shadow:0 8px 30px rgba(0,0,0,0.25); --radius:14px; --greybtn:#2a2a2e;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text","Helvetica Neue",Arial,sans-serif;
  padding-bottom:env(safe-area-inset-bottom);}

/* Barra nera per notch (iPhone 12) */
.safe-notch{
  position:fixed; left:0; right:0; top:0;
  height:env(safe-area-inset-top); background:#000; z-index:200;
}

/* Spazio superiore per non sovrapporre i controlli alla notch */
.app{max-width:680px;margin:0 auto;
  padding:calc(env(safe-area-inset-top) + 8px) 12px calc(12px + env(safe-area-inset-bottom));}

.tabs{display:flex;align-items:center;gap:8px;position:relative;margin-bottom:6px}
.tabs-row{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;flex:1}
.tab{appearance:none;border:1px solid var(--border);background:#0f0f11;color:#fff;border-radius:12px;padding:10px 12px;font-weight:600}
.tab.active{outline:2px solid var(--brand)}
.gear{border:1px solid var(--border);background:#0f0f11;color:#fff;border-radius:12px;padding:10px 12px}

.page{display:none;margin-top:6px}
.page.visible{display:block}

.hero{display:flex;flex-direction:column;align-items:center;gap:14px;margin:6px 0 16px}
.btn-record{width:180px;height:180px;border-radius:50%;border:none;background:var(--brand);color:#073615;font-size:22px;font-weight:800;box-shadow:var(--shadow)}
.btn-record:active{transform:scale(0.98)}
.selector{display:flex;flex-direction:column;gap:6px;width:min(420px,100%)}
.selector select{width:100%;padding:12px;border-radius:12px;border:1px solid var(--border);background:#0f0f11;color:#fff;font-size:16px}

.card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:14px;box-shadow: var(--shadow);margin:14px 0}
.card h2{margin:4px 0 12px 0;font-size:18px}
.rows{display:flex;flex-direction:column;gap:10px}
.row{display:grid;grid-template-columns:1fr auto auto;align-items:center;gap:12px}
.row.compact{margin-top:6px}
.row .time{font-variant-numeric:tabular-nums}
.row .btn.ghost{background:var(--greybtn); color:#ddd; border:1px solid var(--border);}
.row .btn.ghost:active{transform:scale(0.98)}
.row.right{justify-content:flex-end;gap:8px}
.row div:first-child{color:var(--muted)}

.btn{border:none;border-radius:10px;padding:10px 14px;font-weight:700;background:var(--brand);color:#073615}
.btn.outline{background:transparent;color:#fff;border:1px solid var(--border)}
.smallbtn{padding:8px 10px;font-size:14px}

.list{display:flex;flex-direction:column;gap:8px}
.item{display:grid;grid-template-columns:1fr auto auto;gap:10px;align-items:center;padding:10px 12px;border:1px solid var(--border);border-radius:12px;background:#0f0f11}
.item .muted{color:var(--muted);font-variant-numeric:tabular-nums}
.item .extra{justify-self:end}
.item .editbtn{background:var(--greybtn); color:#ddd; border:1px solid var(--border); border-radius:10px; padding:8px 10px; font-weight:700}
.item.weekend .muted, .item.weekend .extra{color:var(--danger)}

.toast{position:fixed;left:50%;bottom:calc(20px + env(safe-area-inset-bottom));transform:translateX(-50%);background:#111;color:#fff;padding:10px 14px;border-radius:12px;border:1px solid var(--border);box-shadow:var(--shadow);opacity:0;pointer-events:none;transition:opacity .2s ease}
.toast.show{opacity:1}

.banner{background:#1a1a1d;border:1px dashed #3a3a40;padding:10px 12px;border-radius:12px;margin:12px 0}

/* Modal layering */
.modal{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;padding:16px;z-index:100}
.modal.z110{z-index:110}
.modal.z120{z-index:120}
.modal.show{display:flex}
.modal-inner{
  background:#141416;border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);
  padding:14px;width:min(420px, 94vw);max-height:90vh;overflow:auto;
}
.modal-inner.narrow{width:min(360px, 94vw)}
.modal-inner h3{margin:0 0 10px 0}
.modal-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:12px;flex-wrap:wrap}

/* Picker readout */
.readout{font-weight:900;font-size:22px;text-align:center;margin:4px 0}

/* Wheel pickers INSIDE popup */
.picker{display:flex;align-items:center;justify-content:center;gap:8px;margin:6px 0 2px;flex-wrap:nowrap;max-width:100%}
.wheel-wrap{transform:scale(0.9);transform-origin:top center}
.wheel{
  appearance:none;-webkit-appearance:none;
  background:#0f0f11;color:#fff;
  border:1px solid var(--border);border-radius:12px;
  width:84px;max-width:40vw;height:120px;
  font-size:18px;line-height:1.2;
  padding:4px 6px;box-sizing:border-box;overflow:auto;text-align:center;
}
.wheel.wide{width:200px;max-width:70vw}
.wheel option{padding:6px 0;text-align:center}
.colon{font-size:22px;opacity:.8;align-self:center;padding:0 4px}

@media (max-width:390px){
  .wheel-wrap{transform:scale(0.85)}
  .wheel{width:72px;height:110px;font-size:16px}
  .wheel.wide{width:180px}
}

/* Big total circle */
.center{display:flex;justify-content:center;margin:14px 0}
.big-circle{width:180px;height:180px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#0f0f11;border:2px solid var(--border);box-shadow:var(--shadow);font-weight:900;font-size:22px}
.big-circle.small{width:160px;height:160px;font-size:20px}
